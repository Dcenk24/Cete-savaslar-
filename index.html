<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gangster Wars - G√∂rsel Versiyon</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            font-family: Arial, sans-serif;
            color: white;
            padding: 10px;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        .header {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        .header h1 { font-size: 32px; margin-bottom: 5px; }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .stat-card {
            background: rgba(0,0,0,0.4);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .stat-bar {
            width: 100%;
            height: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            overflow: hidden;
            margin: 5px 0;
        }
        .stat-fill {
            height: 100%;
            transition: width 0.3s;
        }
        .energy { background: linear-gradient(90deg, #f39c12, #d68910); }
        .stamina { background: linear-gradient(90deg, #3498db, #2980b9); }
        .health { background: linear-gradient(90deg, #2ecc71, #27ae60); }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        .tab {
            padding: 12px 24px;
            background: rgba(0,0,0,0.4);
            border: none;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
        }
        .tab:hover { background: rgba(255,255,255,0.1); }
        .tab.active {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }
        .content {
            background: rgba(0,0,0,0.4);
            padding: 20px;
            border-radius: 10px;
            min-height: 400px;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        .card {
            background: rgba(255,255,255,0.05);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.1);
            transition: all 0.3s;
        }
        .card:hover {
            background: rgba(255,255,255,0.08);
            cursor: pointer;
            transform: translateY(-5px);
        }
        .card.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .card-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 6px;
            margin-bottom: 10px;
        }
        .card-content {
            display: flex;
            flex-direction: column;
        }
        button {
            padding: 10px 20px;
            background: #27ae60;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            width: 100%;
            margin-top: 10px;
        }
        button:hover { background: #229954; }
        button:disabled {
            background: #666;
            cursor: not-allowed;
        }
        .btn-red { background: #e74c3c; }
        .btn-red:hover { background: #c0392b; }
        .btn-blue { background: #3498db; }
        .btn-blue:hover { background: #2980b9; }
        .notifications {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            max-width: 300px;
        }
        .notification {
            background: #27ae60;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            animation: slideIn 0.3s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        .notification.error { background: #e74c3c; }
        .notification.info { background: #3498db; }
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        .text-small { font-size: 13px; color: #bbb; }
        .text-green { color: #2ecc71; }
        .text-red { color: #e74c3c; }
        .text-blue { color: #3498db; }
        .text-yellow { color: #f39c12; }
        .mt-2 { margin-top: 10px; }
        .mb-2 { margin-bottom: 10px; }
        h2 { margin-bottom: 15px; font-size: 24px; }
        h3 { margin-bottom: 10px; font-size: 18px; }
        .flex { display: flex; justify-content: space-between; align-items: center; }
        .flex-col { display: flex; flex-direction: column; gap: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üî´ Gangster Wars</h1>
            <p>Su√ß imparatorluƒüunu kur ve sokaklarƒ±n kralƒ± ol!</p>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <h3 id="playerName">Rookie Gangster</h3>
                <p class="text-yellow" id="playerLevel">Level 1</p>
                <p class="text-small" id="playerXp">XP: 0/100</p>
                
                <div class="mt-2">
                    <div class="flex"><span>Energy</span><span id="energyText">50/50</span></div>
                    <div class="stat-bar"><div class="stat-fill energy" id="energyBar"></div></div>
                </div>
                <div class="mt-2">
                    <div class="flex"><span>Stamina</span><span id="staminaText">20/20</span></div>
                    <div class="stat-bar"><div class="stat-fill stamina" id="staminaBar"></div></div>
                </div>
                <div class="mt-2">
                    <div class="flex"><span>Health</span><span id="healthText">100/100</span></div>
                    <div class="stat-bar"><div class="stat-fill health" id="healthBar"></div></div>
                </div>
            </div>

            <div class="stat-card">
                <h3>üí∞ Para</h3>
                <div class="mb-2">
                    <p class="text-small">Nakit (riskli)</p>
                    <p class="text-green" style="font-size: 24px;" id="cashAmount">$1,000</p>
                </div>
                <div>
                    <p class="text-small">Banka (g√ºvenli)</p>
                    <p class="text-blue" style="font-size: 24px;" id="bankAmount">$0</p>
                </div>
            </div>

            <div class="stat-card">
                <h3>‚öîÔ∏è G√º√ß</h3>
                <div class="mb-2">
                    <p class="text-small">Saldƒ±rƒ±</p>
                    <p class="text-red" style="font-size: 24px;" id="attackPower">0</p>
                </div>
                <div class="mb-2">
                    <p class="text-small">Savunma</p>
                    <p class="text-blue" style="font-size: 24px;" id="defensePower">0</p>
                </div>
                <div>
                    <p class="text-small">√áete Boyutu</p>
                    <p class="text-yellow" style="font-size: 24px;" id="gangSize">1</p>
                </div>
                <button onclick="game.inviteFriend()">+ Arkada≈ü Davet Et</button>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="game.switchTab('jobs')">ƒ∞≈üler</button>
            <button class="tab" onclick="game.switchTab('fight')">D√∂v√º≈ü</button>
            <button class="tab" onclick="game.switchTab('shop')">Market</button>
            <button class="tab" onclick="game.switchTab('properties')">M√ºlkler</button>
            <button class="tab" onclick="game.switchTab('bank')">Banka</button>
        </div>

        <div class="content" id="content"></div>
    </div>

    <div class="notifications" id="notifications"></div>

    <script>
        const game = {
            player: {
                name: "Rookie Gangster",
                level: 1,
                xp: 0,
                xpToNext: 100,
                energy: 50,
                maxEnergy: 50,
                stamina: 20,
                maxStamina: 20,
                health: 100,
                maxHealth: 100,
                cash: 1000,
                bank: 0,
                gangSize: 1
            },
            inventory: [],
            properties: [],
            currentTab: 'jobs',
            lastSave: Date.now(),
            lastIncome: Date.now(),

            jobs: [
                { id: 1, name: "Yankesicilik", energy: 5, min: 50, max: 100, xp: 10, lvl: 1, image: "assets/job_pickpocket.jpg" },
                { id: 2, name: "Gasp", energy: 8, min: 80, max: 150, xp: 15, lvl: 1, image: "assets/job_mugging.jpg" },
                { id: 3, name: "D√ºkkan Soygunu", energy: 12, min: 200, max: 400, xp: 30, lvl: 3, image: "assets/job_shop_robbery.jpg" },
                { id: 4, name: "Araba Hƒ±rsƒ±zlƒ±ƒüƒ±", energy: 15, min: 300, max: 600, xp: 45, lvl: 5, image: "assets/job_car_theft.jpg" },
                { id: 5, name: "Banka Soygunu", energy: 25, min: 800, max: 1500, xp: 100, lvl: 8, image: "assets/job_bank_robbery.jpg" },
                { id: 6, name: "Kumarhane Soygunu", energy: 35, min: 2000, max: 4000, xp: 200, lvl: 12, image: "assets/job_casino_heist.jpg" }
            ],

            items: [
                { id: 1, name: "Sokak Serserisi", type: "√únite", atk: 5, def: 5, price: 500, lvl: 1, image: "assets/unit_thug.jpg" },
                { id: 2, name: "Kabadayƒ±", type: "√únite", atk: 15, def: 12, price: 2000, lvl: 3, image: "assets/unit_tough_guy.jpg" },
                { id: 3, name: "Tetik√ßi", type: "√únite", atk: 30, def: 25, price: 8000, lvl: 7, image: "assets/unit_hitman.jpg" },
                { id: 4, name: "Mu≈üta", type: "Silah", atk: 8, def: 2, price: 300, lvl: 1, image: "assets/item_brass_knuckles.jpg" },
                { id: 5, name: "Tabanca", type: "Silah", atk: 20, def: 5, price: 1500, lvl: 4, image: "assets/item_pistol.jpg" },
                { id: 6, name: "Pompalƒ±", type: "Silah", atk: 35, def: 8, price: 5000, lvl: 8, image: "assets/item_shotgun.jpg" },
                { id: 7, name: "Deri Ceket", type: "Zƒ±rh", atk: 2, def: 10, price: 400, lvl: 2, image: "assets/item_leather_jacket.jpg" },
                { id: 8, name: "Kur≈üun Ge√ßirmez Yelek", type: "Zƒ±rh", atk: 5, def: 30, price: 3000, lvl: 6, image: "assets/item_bulletproof_vest.jpg" },
                { id: 9, name: "Motor", type: "Ara√ß", atk: 10, def: 8, price: 2500, lvl: 3, image: "assets/item_motorcycle.jpg" },
                { id: 10, name: "Spor Araba", type: "Ara√ß", atk: 25, def: 20, price: 10000, lvl: 9, image: "assets/item_sports_car.jpg" }
            ],

            propertiesList: [
                { id: 1, name: "Sokak K√∂≈üesi", price: 1000, income: 50, lvl: 1, image: "assets/prop_street_corner.jpg" },
                { id: 2, name: "Rehinli D√ºkkan", price: 5000, income: 200, lvl: 3, image: "assets/prop_pawn_shop.jpg" },
                { id: 3, name: "Internet Cafe", price: 15000, income: 500, lvl: 6, image: "assets/prop_internet_cafe.jpg" },
                { id: 4, name: "Bar", price: 40000, income: 1200, lvl: 9, image: "assets/prop_bar.jpg" },
                { id: 5, name: "Gece Kul√ºb√º", price: 100000, income: 3000, lvl: 13, image: "assets/prop_nightclub.jpg" }
            ],

            opponents: [],

            init() {
                this.load();
                this.updateUI();
                this.generateOpponents();
                this.switchTab('jobs');
                
                setInterval(() => this.regenerate(), 60000);
                setInterval(() => this.save(), 10000);
            },

            regenerate() {
                const p = this.player;
                p.energy = Math.min(p.maxEnergy, p.energy + 1);
                p.stamina = Math.min(p.maxStamina, p.stamina + 1);
                p.health = Math.min(p.maxHealth, p.health + 1);
                this.updateUI();
            },

            save() {
                const data = {
                    player: this.player,
                    inventory: this.inventory,
                    properties: this.properties,
                    lastIncome: this.lastIncome
                };
                localStorage.setItem('gangsterWars', JSON.stringify(data));
            },

            load() {
                const saved = localStorage.getItem('gangsterWars');
                if (saved) {
                    const data = JSON.parse(saved);
                    this.player = data.player;
                    this.inventory = data.inventory || [];
                    this.properties = data.properties || [];
                    this.lastIncome = data.lastIncome || Date.now();
                }
            },

            updateUI() {
                const p = this.player;
                document.getElementById('playerLevel').textContent = `Level ${p.level}`;
                document.getElementById('playerXp').textContent = `XP: ${p.xp}/${p.xpToNext}`;
                
                document.getElementById('energyText').textContent = `${p.energy}/${p.maxEnergy}`;
                document.getElementById('energyBar').style.width = `${(p.energy/p.maxEnergy)*100}%`;
                
                document.getElementById('staminaText').textContent = `${p.stamina}/${p.maxStamina}`;
                document.getElementById('staminaBar').style.width = `${(p.stamina/p.maxStamina)*100}%`;
                
                document.getElementById('healthText').textContent = `${p.health}/${p.maxHealth}`;
                document.getElementById('healthBar').style.width = `${(p.health/p.maxHealth)*100}%`;
                
                document.getElementById('cashAmount').textContent = `$${p.cash.toLocaleString()}`;
                document.getElementById('bankAmount').textContent = `$${p.bank.toLocaleString()}`;
                
                const combat = this.calculatePower();
                document.getElementById('attackPower').textContent = combat.attack;
                document.getElementById('defensePower').textContent = combat.defense;
                document.getElementById('gangSize').textContent = p.gangSize;
            },

            calculatePower() {
                let attack = 0, defense = 0;
                const max = Math.min(this.player.gangSize, this.inventory.length);
                
                const sorted = [...this.inventory].sort((a, b) => {
                    const itemA = this.items.find(i => i.id === a.id);
                    const itemB = this.items.find(i => i.id === b.id);
                    return (itemB?.atk || 0) - (itemA?.atk || 0);
                });

                for (let i = 0; i < max; i++) {
                    const item = this.items.find(it => it.id === sorted[i].id);
                    if (item) {
                        attack += item.atk * sorted[i].qty;
                        defense += item.def * sorted[i].qty;
                    }
                }
                
                return { attack, defense };
            },

            notify(msg, type = 'info') {
                const div = document.createElement('div');
                div.className = `notification ${type}`;
                div.textContent = msg;
                document.getElementById('notifications').appendChild(div);
                setTimeout(() => div.remove(), 3000);
            },

            switchTab(tab) {
                this.currentTab = tab;
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                event.target.classList.add('active');
                
                const content = document.getElementById('content');
                
                if (tab === 'jobs') {
                    content.innerHTML = '<h2>üíº ƒ∞≈üler</h2><div class="grid" id="jobsGrid"></div>';
                    const grid = document.getElementById('jobsGrid');
                    this.jobs.forEach(job => {
                        const canDo = this.player.level >= job.lvl && this.player.energy >= job.energy;
                        grid.innerHTML += `
                            <div class="card ${!canDo ? 'disabled' : ''}" onclick="${canDo ? `game.doJob(${job.id})` : ''}">
                                <img src="${job.image}" alt="${job.name}" class="card-image" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22200%22 height=%22200%22%3E%3Crect fill=%22%23333%22 width=%22200%22 height=%22200%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 text-anchor=%22middle%22 dy=%22.3em%22 fill=%22%23999%22 font-size=%2216%22%3EG√∂rsel Y√ºkleniyor%3C/text%3E%3C/svg%3E'">
                                <div class="card-content">
                                    <h3>${job.name}</h3>
                                    <p class="text-small">‚ö° Energy: ${job.energy}</p>
                                    <p class="text-small">üí∞ $${job.min} - $${job.max}</p>
                                    <p class="text-small">‚≠ê XP: ${job.xp}</p>
                                    <p class="text-small ${this.player.level >= job.lvl ? 'text-green' : 'text-red'}">Level ${job.lvl}</p>
                                </div>
                            </div>
                        `;
                    });
                } else if (tab === 'fight') {
                    content.innerHTML = '<h2>‚öîÔ∏è D√∂v√º≈ü</h2><div class="grid" id="fightGrid"></div>';
                    const grid = document.getElementById('fightGrid');
                    this.opponents.forEach(opp => {
                        grid.innerHTML += `
                            <div class="card">
                                <h3>${opp.name}</h3>
                                <p class="text-small">Level: ${opp.level}</p>
                                <p class="text-red">‚öîÔ∏è ${opp.atk}</p>
                                <p class="text-blue">üõ°Ô∏è ${opp.def}</p>
                                <p class="text-green">üí∞ $${opp.cash}</p>
                                <button class="btn-red" onclick="game.attack(${opp.id})" ${this.player.stamina < 5 ? 'disabled' : ''}>
                                    Saldƒ±r (5 stamina)
                                </button>
                            </div>
                        `;
                    });
                } else if (tab === 'shop') {
                    content.innerHTML = '<h2>üõí Market</h2>';
                    if (this.inventory.length > 0) {
                        content.innerHTML += '<h3>Envanteriniz</h3><div class="grid" id="invGrid"></div>';
                        const invGrid = document.getElementById('invGrid');
                        this.inventory.forEach(inv => {
                            const item = this.items.find(i => i.id === inv.id);
                            if (item) {
                                invGrid.innerHTML += `
                                    <div class="card disabled">
                                        <img src="${item.image}" alt="${item.name}" class="card-image" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22200%22 height=%22200%22%3E%3Crect fill=%22%23333%22 width=%22200%22 height=%22200%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 text-anchor=%22middle%22 dy=%22.3em%22 fill=%22%23999%22 font-size=%2216%22%3EG√∂rsel%3C/text%3E%3C/svg%3E'">
                                        <h3>${item.name}</h3>
                                        <p>Adet: x${inv.qty}</p>
                                    </div>
                                `;
                            }
                        });
                    }
                    content.innerHTML += '<h3 style="margin-top:20px">Satƒ±n Al</h3><div class="grid" id="shopGrid"></div>';
                    const grid = document.getElementById('shopGrid');
                    this.items.forEach(item => {
                        const canBuy = this.player.level >= item.lvl && this.player.cash >= item.price;
                        grid.innerHTML += `
                            <div class="card ${!canBuy ? 'disabled' : ''}">
                                <img src="${item.image}" alt="${item.name}" class="card-image" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22200%22 height=%22200%22%3E%3Crect fill=%22%23333%22 width=%22200%22 height=%22200%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 text-anchor=%22middle%22 dy=%22.3em%22 fill=%22%23999%22 font-size=%2216%22%3EG√∂rsel%3C/text%3E%3C/svg%3E'">
                                <div class="card-content">
                                    <h3>${item.name}</h3>
                                    <p class="text-small">${item.type}</p>
                                    <p class="text-red">‚öîÔ∏è ${item.atk}</p>
                                    <p class="text-blue">üõ°Ô∏è ${item.def}</p>
                                    <p class="text-green">üí∞ $${item.price.toLocaleString()}</p>
                                    <p class="text-small ${this.player.level >= item.lvl ? 'text-green' : 'text-red'}">Level ${item.lvl}</p>
                                    <button onclick="game.buyItem(${item.id})" ${!canBuy ? 'disabled' : ''}>Satƒ±n Al</button>
                                </div>
                            </div>
                        `;
                    });
                } else if (tab === 'properties') {
                    const hourlyIncome = this.properties.reduce((sum, p) => {
                        const prop = this.propertiesList.find(pr => pr.id === p.id);
                        return sum + (prop?.income || 0) * p.qty;
                    }, 0);
                    
                    content.innerHTML = `
                        <h2>üè¢ M√ºlkler</h2>
                        <div class="stat-card" style="margin-bottom:20px">
                            <div class="flex">
                                <div>
                                    <p class="text-small">Saatlik Gelir</p>
                                    <p class="text-green" style="font-size:28px">$${hourlyIncome.toLocaleString()}/saat</p>
                                </div>
                                <button onclick="game.collectIncome()">Geliri Topla</button>
                            </div>
                        </div>
                    `;
                    
                    if (this.properties.length > 0) {
                        content.innerHTML += '<h3>M√ºlkleriniz</h3><div class="grid" id="ownedProps"></div>';
                        const ownedGrid = document.getElementById('ownedProps');
                        this.properties.forEach(prop => {
                            const p = this.propertiesList.find(pr => pr.id === prop.id);
                            if (p) {
                                ownedGrid.innerHTML += `
                                    <div class="card disabled">
                                        <img src="${p.image}" alt="${p.name}" class="card-image" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22200%22 height=%22200%22%3E%3Crect fill=%22%23333%22 width=%22200%22 height=%22200%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 text-anchor=%22middle%22 dy=%22.3em%22 fill=%22%23999%22 font-size=%2216%22%3EG√∂rsel%3C/text%3E%3C/svg%3E'">
                                        <h3>${p.name}</h3>
                                        <p>Adet: x${prop.qty}</p>
                                        <p class="text-green">$${p.income}/saat</p>
                                    </div>
                                `;
                            }
                        });
                    }
                    
                    content.innerHTML += '<h3 style="margin-top:20px">Satƒ±n Al</h3><div class="grid" id="propsGrid"></div>';
                    const grid = document.getElementById('propsGrid');
                    this.propertiesList.forEach(prop => {
                        const owned = this.properties.filter(p => p.id === prop.id).reduce((s, p) => s + p.qty, 0);
                        const currentPrice = Math.floor(prop.price * Math.pow(1.5, owned));
                        const canBuy = this.player.level >= prop.lvl && this.player.cash >= currentPrice;
                        
                        grid.innerHTML += `
                            <div class="card ${!canBuy ? 'disabled' : ''}">
                                <img src="${prop.image}" alt="${prop.name}" class="card-image" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22200%22 height=%22200%22%3E%3Crect fill=%22%23333%22 width=%22200%22 height=%22200%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 text-anchor=%22middle%22 dy=%22.3em%22 fill=%22%23999%22 font-size=%2216%22%3EG√∂rsel%3C/text%3E%3C/svg%3E'">
                                <div class="card-content">
                                    <h3>${prop.name}</h3>
                                    <p class="text-green">üíµ $${prop.income}/saat</p>
                                    <p class="text-yellow">üí∞ $${currentPrice.toLocaleString()}</p>
                                    <p class="text-small">Sahip olunan: ${owned}</p>
                                    <p class="text-small ${this.player.level >= prop.lvl ? 'text-green' : 'text-red'}">Level ${prop.lvl}</p>
                                    <button onclick="game.buyProperty(${prop.id})" ${!canBuy ? 'disabled' : ''}>Satƒ±n Al</button>
                                </div>
                            </div>
                        `;
                    });
                } else if (tab === 'bank') {
                    content.innerHTML = `
                        <h2>üè¶ Banka</h2>
                        <div class="stat-card" style="margin-bottom:20px">
                            <h3>Hesap √ñzeti</h3>
                            <div class="flex" style="margin:15px 0">
                                <span>Nakit:</span>
                                <span class="text-green" style="font-size:20px">$${this.player.cash.toLocaleString()}</span>
                            </div>
                            <div class="flex">
                                <span>Banka:</span>
                                <span class="text-blue" style="font-size:20px">$${this.player.bank.toLocaleString()}</span>
                            </div>
                        </div>
                        
                        <div class="stat-card" style="margin-bottom:20px">
                            <h3>Para Yatƒ±r</h3>
                            <button class="btn-blue" onclick="game.deposit(0.25)" ${this.player.cash < 1 ? 'disabled' : ''}>%25 Yatƒ±r</button>
                            <button class="btn-blue" onclick="game.deposit(0.5)" ${this.player.cash < 1 ? 'disabled' : ''}>%50 Yatƒ±r</button>
                            <button class="btn-blue" onclick="game.deposit(1)" ${this.player.cash < 1 ? 'disabled' : ''}>T√ºm√ºn√º Yatƒ±r</button>
                        </div>
                        
                        <div class="stat-card">
                            <h3>Para √áek</h3>
                            <button onclick="game.withdraw(0.25)" ${this.player.bank < 1 ? 'disabled' : ''}>%25 √áek</button>
                            <button onclick="game.withdraw(0.5)" ${this.player.bank < 1 ? 'disabled' : ''}>%50 √áek</button>
                            <button onclick="game.withdraw(1)" ${this.player.bank < 1 ? 'disabled' : ''}>T√ºm√ºn√º √áek</button>
                        </div>
                    `;
                }
            },

            doJob(jobId) {
                const job = this.jobs.find(j => j.id === jobId);
                const p = this.player;
                
                if (p.energy < job.energy) {
                    this.notify('Yeterli energy yok!', 'error');
                    return;
                }
                
                const earned = Math.floor(Math.random() * (job.max - job.min + 1)) + job.min;
                p.energy -= job.energy;
                p.cash += earned;
                p.xp += job.xp;
                
                if (p.xp >= p.xpToNext) {
                    p.xp -= p.xpToNext;
                    p.level++;
                    p.xpToNext = Math.floor(p.xpToNext * 1.5);
                    p.maxEnergy += 5;
                    p.maxStamina += 2;
                    p.maxHealth += 10;
                    this.notify(`üéâ LEVEL UP! ≈ûimdi level ${p.level}!`, 'info');
                }
                
                this.notify(`${job.name} tamamlandƒ±! $${earned} ve ${job.xp} XP kazandƒ±nƒ±z!`, 'info');
                this.updateUI();
                this.switchTab('jobs');
            },

            generateOpponents() {
                const names = ["Tony Scarface", "B√ºy√ºk Mike", "Bƒ±√ßak√ßƒ± Johnny", "Deli K√∂pek", "Sessiz Sam"];
                this.opponents = names.map((name, i) => ({
                    id: i + 1,
                    name,
                    level: Math.max(1, this.player.level + Math.floor(Math.random() * 5) - 2),
                    atk: 50 + Math.floor(Math.random() * 100),
                    def: 50 + Math.floor(Math.random() * 100),
                    cash: 1000 + Math.floor(Math.random() * 5000)
                }));
            },

            attack(oppId) {
                const opp = this.opponents.find(o => o.id === oppId);
                const p = this.player;
                
                if (p.stamina < 5) {
                    this.notify('Yeterli stamina yok!', 'error');
                    return;
                }
                
                const combat = this.calculatePower();
                const playerPower = combat.attack + Math.random() * 20 - 10;
                const oppPower = opp.def + Math.random() * 20 - 10;
                
                const won = playerPower > oppPower;
                const stolen = won ? Math.floor(opp.cash * 0.3) : 0;
                const healthLost = won ? Math.floor(Math.random() * 10) + 5 : Math.floor(Math.random() * 20) + 10;
                
                p.stamina -= 5;
                p.health = Math.max(0, p.health - healthLost);
                
                if (won) {
                    p.cash += stolen;
                    p.xp += 50;
                    this.notify(`‚öîÔ∏è Zafer! ${opp.name}'i yendiniz ve $${stolen} √ßaldƒ±nƒ±z!`, 'info');
                } else {
                    const lost = Math.floor(p.cash * 0.1);
                    p.cash = Math.max(0, p.cash - lost);
                    p.xp += 10;
                    this.notify(`üíÄ Maƒülubiyet! ${opp.name} sizi yendi!`, 'error');
                }
                
                this.generateOpponents();
                this.updateUI();
                this.switchTab('fight');
            },

            buyItem(itemId) {
                const item = this.items.find(i => i.id === itemId);
                const p = this.player;
                
                if (p.cash < item.price) {
                    this.notify('Yeterli para yok!', 'error');
                    return;
                }
                
                p.cash -= item.price;
                const existing = this.inventory.find(i => i.id === itemId);
                if (existing) {
                    existing.qty++;
                } else {
                    this.inventory.push({ id: itemId, qty: 1 });
                }
                
                this.notify(`${item.name} satƒ±n alƒ±ndƒ±!`, 'info');
                this.updateUI();
                this.switchTab('shop');
            },

            buyProperty(propId) {
                const prop = this.propertiesList.find(p => p.id === propId);
                const owned = this.properties.filter(p => p.id === propId).reduce((s, p) => s + p.qty, 0);
                const price = Math.floor(prop.price * Math.pow(1.5, owned));
                
                if (this.player.cash < price) {
                    this.notify('Yeterli para yok!', 'error');
                    return;
                }
                
                this.player.cash -= price;
                const existing = this.properties.find(p => p.id === propId);
                if (existing) {
                    existing.qty++;
                } else {
                    this.properties.push({ id: propId, qty: 1 });
                }
                
                this.notify(`${prop.name} satƒ±n alƒ±ndƒ±!`, 'info');
                this.updateUI();
                this.switchTab('properties');
            },

            collectIncome() {
                const now = Date.now();
                const hours = (now - this.lastIncome) / (1000 * 60 * 60);
                let total = 0;
                
                this.properties.forEach(prop => {
                    const p = this.propertiesList.find(pr => pr.id === prop.id);
                    if (p) total += p.income * prop.qty * hours;
                });
                
                total = Math.floor(total);
                if (total > 0) {
                    this.player.cash += total;
                    this.lastIncome = now;
                    this.notify(`$${total} gelir toplandƒ±!`, 'info');
                    this.updateUI();
                } else {
                    this.notify('Hen√ºz toplanacak gelir yok!', 'info');
                }
            },

            deposit(percent) {
                const amount = Math.floor(this.player.cash * percent);
                if (amount < 1) return;
                this.player.cash -= amount;
                this.player.bank += amount;
                this.notify(`$${amount} yatƒ±rƒ±ldƒ±!`, 'info');
                this.updateUI();
                this.switchTab('bank');
            },

            withdraw(percent) {
                const amount = Math.floor(this.player.bank * percent);
                if (amount < 1) return;
                this.player.bank -= amount;
                this.player.cash += amount;
                this.notify(`$${amount} √ßekildi!`, 'info');
                this.updateUI();
                this.switchTab('bank');
            },

            inviteFriend() {
                this.player.gangSize++;
                this.notify('√áete √ºyesi eklendi!', 'info');
                this.updateUI();
            }
        };

        window.addEventListener('load', () => game.init());
    </script>
</body>
</html>
